CMAKE_MINIMUM_REQUIRED(VERSION 3.10)
PROJECT(MLogger3rdparty)

IF(NOT TARGET gtest)
    MESSAGE(STATUS "gtest target not found. Adding subdirectory...")
    ADD_SUBDIRECTORY(googletest EXCLUDE_FROM_ALL)
ELSE()
    MESSAGE(STATUS "gtest target already exists. Skipping.")
ENDIF()

IF(NOT TARGET gflags)
    MESSAGE(STATUS "gflags target not found. Adding subdirectory...")
    ADD_SUBDIRECTORY(gflags EXCLUDE_FROM_ALL)
ELSE()
    MESSAGE(STATUS "gflags target already exists. Skipping.")
ENDIF()

IF(NOT TARGET glog)
    MESSAGE(STATUS "glog target not found. Adding subdirectory...")
    SET(CMAKE_DISABLE_FIND_PACKAGE_gflags ON)
    SET(WITH_GFLAGS ON CACHE BOOL "Enable gflags support in glog")
    SET(WITH_SYSTEM_GFLAGS OFF CACHE BOOL "Do not use system-installed gflags")
    ADD_SUBDIRECTORY(glog EXCLUDE_FROM_ALL)
    SET(CMAKE_DISABLE_FIND_PACKAGE_gflags OFF)
ELSE()
    message(STATUS "glog target already exists. Skipping.")
ENDIF()

